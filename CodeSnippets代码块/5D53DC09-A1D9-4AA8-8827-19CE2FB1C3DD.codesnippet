<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>IDECodeSnippetCompletionPrefix</key>
	<string>choutixiaoguo</string>
	<key>IDECodeSnippetCompletionScopes</key>
	<array>
		<string>TopLevel</string>
	</array>
	<key>IDECodeSnippetContents</key>
	<string>import UIKit

class HMDrawViewController: UIViewController {
    weak var leftView:UIView!
    weak var rightView:UIView!
    weak var mainView:UIView!
    var isDraging:Bool!
    
    override func viewDidLoad() {
        super.viewDidLoad()

        // 1.æ·»åŠ å­æ§ä»¶
        self.addChildView()
///*****ğŸ’—#warning ç¬¬ä¸‰æ­¥ è§‚å¯Ÿ_mainViewçš„frameæ”¹å˜
        
        /**
        *  ç»™_mainViewæ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€…
        *
        *  KeyPathï¼šç›‘å¬frameè¿™ä¸ªå±æ€§
        *
        *  optionsï¼šç›‘å¬æ–°å€¼çš„æ”¹å˜
        */
        ////*****âœ…/ 2.ç›‘å¬
        mainView.addObserver(self, forKeyPath: "frame", options: NSKeyValueObservingOptions.New, context: nil)

    }
        ////*****âœ…/ 2. å½“_mainViewçš„frameå±æ€§æ”¹å˜çš„æ—¶å€™å°±ä¼šè°ƒç”¨
    override func observeValueForKeyPath(keyPath: String?, ofObject object: AnyObject?, change: [NSObject : AnyObject]?, context: UnsafeMutablePointer&lt;Void&gt;) {
            NSLog("%@", NSStringFromCGRect(mainView.frame));
        
            if (mainView.frame.origin.x &lt; 0) { // å¾€å·¦ç§»åŠ¨
            // æ˜¾ç¤ºå³è¾¹
            rightView.hidden = false;
            // éšè—å·¦è¾¹
            leftView.hidden = true;
            }else if (mainView.frame.origin.x &gt; 0){ // å¾€å³ç§»åŠ¨
            // æ˜¾ç¤ºå·¦è¾¹
            rightView.hidden = true;
            // éšè—å³è¾¹
            leftView.hidden = false;

        }
    }

    
///*****ğŸ’—#warning ç¬¬ä¸€æ­¥
        func addChildView(){

            ///*****âœ…// left
            let leftView:UIView = UIView(frame: self.view.bounds)
            leftView.backgroundColor = UIColor.greenColor()
            self.view.addSubview(leftView)
            self.leftView = leftView;
            
            ///*****âœ…// right
            let rightView:UIView = UIView(frame: self.view.bounds)
            rightView.backgroundColor = UIColor.blueColor()
            self.view.addSubview(rightView)
            self.rightView = rightView;
            
            ///*****âœ…// mainView
            let mainView:UIView = UIView(frame: self.view.bounds)
            mainView.backgroundColor = UIColor.redColor()
            self.view.addSubview(mainView)
            self.mainView = mainView;
   }
///*****ğŸ’—#warning ç¬¬äºŒå¸ƒ
    override func touchesMoved(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?) {
        ////*****âœ…/ è·å–UITouchå¯¹è±¡
        let touch:UITouch = (touches as NSSet).anyObject() as! UITouch
     
        ////*****âœ…/ è·å–å½“å‰ç‚¹
        let currentPoint:CGPoint = touch.locationInView(self.view)
        
        ////*****âœ…/ è·å–ä¸Šä¸€ä¸ªç‚¹
        let prePoint:CGPoint = touch.previousLocationInView(self.view)

        ////*****âœ…/ xè½´åç§»é‡ï¼šå½“æ‰‹æŒ‡ç§»åŠ¨ä¸€ç‚¹çš„æ—¶å€™ï¼Œxåç§»å¤šå°‘
        let offsetX:CGFloat = currentPoint.x - prePoint.x
        
        ////*****âœ…/ è®¾ç½®å½“å‰ä¸»è§†å›¾çš„frame
//        var mainframe:CGRect = self.mainView.frame
//        mainframe.origin.x +=  offsetX
        mainView.frame = self.getCurrentFrameWithOffsetX(offsetX)
        
        
        
        isDraging = true
    }
    
///*****ğŸ’—#warning ç¬¬å››æ­¥
    let HMMaxY:CGFloat = 60
    ////*****âœ…/ å½“æ‰‹æŒ‡åç§»ä¸€ç‚¹ï¼Œæ ¹æ®Xè½´çš„åç§»é‡ç®—å‡ºå½“å‰ä¸»è§†å›¾çš„frame
        
    func getCurrentFrameWithOffsetX(offsetX:CGFloat) -&gt; CGRect
    {
        
        let screenW:CGFloat = UIScreen.mainScreen().bounds.size.width;
        
        let screenH:CGFloat = UIScreen.mainScreen().bounds.size.height;
    
    ////*****âœ…/ è·å–yè½´åç§»é‡ï¼Œæ‰‹æŒ‡æ¯ç§»åŠ¨ä¸€ç‚¹ï¼Œyè½´åç§»å¤šå°‘
        
        let offsetY:CGFloat = offsetX * HMMaxY / screenW;
        
        var scale:CGFloat = (screenH - 2 * offsetY) / screenH;
    
    if (mainView.frame.origin.x &lt; 0) { // å¾€å·¦è¾¹æ»‘åŠ¨
        scale = (screenH + 2 * offsetY) / screenH;
    }
    
    ////*****âœ…/ è·å–ä¹‹å‰çš„frame
        var frame:CGRect  = mainView.frame;
    frame.origin.x += offsetX;
    frame.size.height = frame.size.height * scale
    frame.size.width = frame.size.width * scale;
    frame.origin.y = (screenH - frame.size.height) * 0.5;
    
        return frame;
    }

///*****ğŸ’—#warning ç¬¬äº”æ­¥
    let HMRTarget:CGFloat = 300
    let HMLTarget:CGFloat = -270
    /*
    _mainView.frame.origin.x &gt; screenW * 0.5 å®šä½åˆ°å³è¾¹
    CGRectGetMaxX(_mainView.frame) &lt; screenW * 0.5 å®šä½åˆ°å·¦è¾¹ -220
    
    */
    ////*****âœ…/ å®šä½
    override func touchesEnded(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?) {
//        ////*****âœ…/ å¤ä½
//        if (isDraging == true &amp;&amp; mainView.frame.origin.x.isZero == false) {
//            ///*****âœ…åŠ¨ç”»0.25
//            UIView.animateWithDuration(0.25, animations: { () -&gt; Void in
//                self.mainView.frame = self.view.bounds;
//            })
//
//        }

        let screenW:CGFloat = UIScreen.mainScreen().bounds.size.width
        
        var target:CGFloat = 0
        if ((mainView.frame.origin.x &gt; screenW * 0.5) == true) { // å®šä½åˆ°å³è¾¹
            
            target = HMRTarget
            
        }else if (CGRectGetMaxX(mainView.frame) &lt; screenW * 0.5) { // å®šä½åˆ°å·¦è¾¹
            
            target = HMLTarget
            
        }
        ///*****âœ…åŠ¨ç”»0.25
        UIView.animateWithDuration(0.25) { () -&gt; Void in
            if (target.isZero == false) { ////*****âœ…/ åœ¨éœ€è¦å®šä½å·¦è¾¹æˆ–è€…å³è¾¹
                
                ////*****âœ…/ è·å–xè½´åç§»é‡
                let offsetX:CGFloat = target - self.mainView.frame.origin.x;
                
                ////*****âœ…/ è®¾ç½®å½“å‰ä¸»è§†å›¾çš„frame
                self.mainView.frame = self.getCurrentFrameWithOffsetX(offsetX)
                
            }else{ ////*****âœ…/ è¿˜åŸ
                
           self.mainView.frame = self.view.bounds;
            }
        }
        
        isDraging = false
        
    }
}
</string>
	<key>IDECodeSnippetIdentifier</key>
	<string>5D53DC09-A1D9-4AA8-8827-19CE2FB1C3DD</string>
	<key>IDECodeSnippetLanguage</key>
	<string>Xcode.SourceCodeLanguage.Swift</string>
	<key>IDECodeSnippetSummary</key>
	<string>å·¦ä¸­å³åˆ‡æ¢view</string>
	<key>IDECodeSnippetTitle</key>
	<string>æŠ½å±‰æ•ˆæœ</string>
	<key>IDECodeSnippetUserSnippet</key>
	<true/>
	<key>IDECodeSnippetVersion</key>
	<integer>2</integer>
</dict>
</plist>
